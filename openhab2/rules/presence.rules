rule "Philipp is home"
   when
      Item IPHONE_PHILIPP_WIFI_ONLINE changed to ON or
      Item IPHONE_PHILIPP_BT_ONLINE changed to ON
   then
      postUpdate(PHILIPP_HOME, ON)
    //  sendTelegram("barbie", "Philipp is home")
end
 
rule "Philipp left home"
   when
      Item IPHONE_PHILIPP_WIFI_ONLINE changed to OFF or
      Item IPHONE_PHILIPP_BT_ONLINE changed to OFF
   then
      if(IPHONE_PHILIPP_WIFI_ONLINE.state == OFF && IPHONE_PHILIPP_BT_ONLINE.state == OFF) {
         postUpdate(PHILIPP_HOME, OFF)
         //sendTelegram("barbie", "Philipp left home")
      }
end

rule "Barbie is home"
   when
      Item IPHONE_BARBIE_WIFI_ONLINE changed to ON or
      Item IPHONE_BARBIE_BT_ONLINE changed to ON
   then
      postUpdate(BARBIE_HOME, ON)
    //  sendTelegram("philipp", "Barbie is home")
end
 
rule "Barbie left home"
   when
      Item IPHONE_BARBIE_WIFI_ONLINE changed to OFF or
      Item IPHONE_BARBIE_BT_ONLINE changed to OFF
   then
      if(IPHONE_BARBIE_WIFI_ONLINE.state == OFF && IPHONE_BARBIE_BT_ONLINE.state == OFF) {
         postUpdate(BARBIE_HOME, OFF)
     //    sendTelegram("philipp", "Barbie left home")
      }
end

rule "Somebody is home"
   when
      Item BARBIE_HOME changed to ON or
      Item PHILIPP_HOME changed to ON
   then
      postUpdate(SOMEBODY_HOME, ON)
end
 
rule "Nobody is home"
   when
      Item BARBIE_HOME changed to OFF or
      Item PHILIPP_HOME changed to OFF
   then
      if(BARBIE_HOME.state == OFF && PHILIPP_HOME.state == OFF) {
      postUpdate(SOMEBODY_HOME, OFF)
      }
end